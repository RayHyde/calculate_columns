$(document).ready(function(){function t(){n=parseInt($("#totalWidth").val()),s=parseInt($("#cols").val()),l=s-1,r=parseInt($("#gutterWidth").val()),c=$("input[type=radio]:checked").val()}function i(){$(".result").add(v.find("li")).remove(),v.find(".message").removeClass("show").html("")}function e(){i(),t();var e=s+l;$(".type").html(c),"px"==c?(u=parseInt(n-l*r)/s,o=u+"",a=-1!==o.indexOf(".")?1:0):(u=parseInt(100-l*r)/s,o=u+""),h=s*u+l*r,$(".setWidth").css("width",n);for(var d=0;e>d;d++)$(".wrap ul").append("<li/>");v.find("li:nth-child(even)").addClass("gutter"),v.find("li:nth-child(2)").append('<div class="result">'+r+c+"</div>"),"px"==c?(v.find("li").css("width",u+"px"),v.find(".gutter").css("width",r+"px")):(v.find("ul").css("width","100%"),v.find("li").css("width",u+"%"),v.find(".gutter").css("width",r+"%")),v.append('<div class="result">Calculated width: '+h+c+"</div>"),v.find("li:first-child").append('<div class="result">'+u+c+"</div>"),1==a&&(v.find("li:first-child .result").addClass("error"),v.find(".message").addClass("show").html("Your columns have widths with decimals. Better play around with the gutter width...")),w.text(".wrap {\n	width: "+n+"px;\n}\nul.columns {\n	list-style: none;\n	margin: 0 0 0 -"+r+c+";\n	padding: 0;\n	width: "+u+c+";\n}\nul.columns li {\n	float: left;\n	margin: 0 0 0 "+r+c+";\n	padding: 0;\n}"),m.text('<div class="wrap">\n	<ul class="columns">\n');for(var d=0;s>d;d++){var f=m.text();f+="		<li></li>\n",m.text(f)}var f=m.text();f+="	</ul>\n</div>",m.text(f)}function d(t,i){var e=$(t),d=parseInt(e.val(),10),n=i||1,s=d+n;s>-1&&e.val(s)}var n,s,l,r,a,h,c,u,o,f,p,v=$(".wrap"),w=($("form"),$("#code pre")),m=$("#code2 pre");e(),$("input[type=text]").on("change",function(){var t=$(this).val();return $(this).prev("input").val(t),e(),!1}),$("pre").on("click",function(){$(this).text()}),$("input[type=radio]").on("change",function(){return p=v.find(".gutter").width()/n*100,f=v.find("li").eq(0).width()/n*100,"%"==c&&(p=p/100*n,f=f/100*n),e(),"%"==c?(v.find("li").css("width",f+c),v.find(".gutter").css("width",p+c),p=(Math.ceil(10*p)/10).toFixed(1),f=(Math.ceil(10*f)/10).toFixed(1)):(p=(Math.ceil(10*p)/10).toFixed(),f+="",a=-1!==f.indexOf(".")?1:0,1==a?(v.find("li:first-child .result").addClass("error"),v.find(".message").addClass("show").html("Your columns have widths with decimals. Better play around with the gutter width...")):(v.find("li:first-child .result").removeClass("error"),v.find(".message").remove()),v.find("li").css("width",f+c),v.find(".gutter").css("width",p+c)),$("#gutterWidth").val(p),$(".gutter .result").html(p+c),v.find("li:first-child .result").html(f+c),!1}),$("#cols, #gutterWidth, #totalWidth").keydown(function(t){var i=t.keyCode||t.which,n={left:37,up:38,right:39,down:40};switch(i){case n.up:d(this,1);break;case n.down:d(this,-1);break;case n.right:d(this,1);break;case n.left:d(this,-1);break;default:return}var s=$(this).val();return $(this).prev("input").val(s),e(),!1})});