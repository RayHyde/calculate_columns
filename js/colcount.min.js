$(document).ready(function(){let a,b,c,d,e;const f={},g=$(".wrap"),h=$("form"),j=$("#code pre"),k=$("#code2 pre"),l=()=>{f.totalWidth=parseInt($("#totalWidth").val()),f.cols=parseInt($("#cols").val()),f.gutters=f.cols-1,f.gutterWidth=parseInt($("#gutterWidth").val()),f.type=$("input[type=radio]:checked").val()},m=()=>{$(".result").add(g.find("li")).remove(),g.find(".message").removeClass("show").html("")},n=()=>{m(),l();const c=f.cols+f.gutters;$(".type").html(f.type),"px"==f.type?(f.colWidth=parseInt(f.totalWidth-f.gutters*f.gutterWidth)/f.cols,b=f.colWidth+"",a=-1===b.indexOf(".")?0:1):(f.colWidth=parseInt(100-f.gutters*f.gutterWidth)/f.cols,b=f.colWidth+""),f.calculatedWidth=f.cols*f.colWidth+f.gutters*f.gutterWidth,$(".setWidth").css("width",f.totalWidth);for(let a=0;a<c;a++)$(".wrap ul").append("<li/>");g.find("li:nth-child(even)").addClass("gutter"),g.find("li:nth-child(2)").append("<div class=\"result\">"+f.gutterWidth+f.type+"</div>"),"px"==f.type?(g.find("li").css("width",f.colWidth+"px"),g.find(".gutter").css("width",f.gutterWidth+"px")):(g.find("ul").css("width","100%"),g.find("li").css("width",f.colWidth+"%"),g.find(".gutter").css("width",f.gutterWidth+"%")),g.append("<div class=\"result\">Calculated width: "+f.calculatedWidth+f.type+"</div>"),g.find("li:first-child").append("<div class=\"result\">"+f.colWidth+f.type+"</div>"),1==a&&(g.find("li:first-child .result").addClass("error"),g.find(".message").addClass("show").html("Your columns have widths with decimals. Better play around with the gutter width...")),j.text(".wrap {\n\twidth: "+f.totalWidth+"px;\n}\nul.columns {\n\tlist-style: none;\n\tmargin: 0 0 0 -"+f.gutterWidth+f.type+";\n\tpadding: 0;\n\twidth: "+f.colWidth+f.type+";\n}\nul.columns li {\n\tfloat: left;\n\tmargin: 0 0 0 "+f.gutterWidth+f.type+";\n\tpadding: 0;\n}"),k.text("<div class=\"wrap\">\n\t<ul class=\"columns\">\n");for(var d=0;d<f.cols;d++)e=k.text(),e+="\t\t<li></li>\n",k.text(e);e=k.text(),e+="\t</ul>\n</div>",k.text(e)};n(),$("input[type=text]").on("change",function(){return e=$(this).val(),$(this).prev("input").val(e),n(),!1}),$("input[type=radio]").on("change",function(){return d=100*(g.find(".gutter").width()/f.totalWidth),c=100*(g.find("li").eq(0).width()/f.totalWidth),"%"==f.type&&(d=d/100*f.totalWidth,c=c/100*totalWidth),n(),"%"==f.type?(g.find("li").css("width",c+f.type),g.find(".gutter").css("width",d+f.type),d=(Math.ceil(10*d)/10).toFixed(1),c=(Math.ceil(10*c)/10).toFixed(1)):(d=(Math.ceil(10*d)/10).toFixed(),c+="",a=-1===c.indexOf(".")?0:1,1==a?(g.find("li:first-child .result").addClass("error"),g.find(".message").addClass("show").html("Your columns have widths with decimals. Better play around with the gutter width...")):(g.find("li:first-child .result").removeClass("error"),g.find(".message").remove()),g.find("li").css("width",c+f.type),g.find(".gutter").css("width",d+f.type)),$("#gutterWidth").val(d),$(".gutter .result").html(d+f.type),g.find("li:first-child .result").html(c+f.type),!1});const o=(a,b)=>{const c=$(a),d=parseInt(c.val(),10),e=d+(b||1);-1<e&&c.val(e)};$("#cols, #gutterWidth, #totalWidth").keydown(function(a){const b=a.keyCode||a.which,c={left:37,up:38,right:39,down:40};switch(b){case c.up:o(this,1);break;case c.down:o(this,-1);break;case c.right:o(this,1);break;case c.left:o(this,-1);break;default:return;}return $(this).prev("input").val($(this).val()),n(),!1})});
